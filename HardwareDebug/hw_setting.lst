   1                             		.file	"hw_setting.c"
   2                             		.section P,"ax"
   3                             	.Ltext0:
   5                             	_out_w:
   6                             	.LFB0:
   7                             		.file 1 "d:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_rskrx65n\\include\\tk\\sysdepend\\cpu\\rx65n\\sysli
   1:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** /*
   2:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *----------------------------------------------------------------------
   3:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *    micro T-Kernel 3.00.06.B0
   4:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *
   5:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *    Copyright (C) 2022 by Ken Sakamura.
   6:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *    This software is distributed under the T-License 2.2.
   7:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *----------------------------------------------------------------------
   8:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *
   9:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *    Released by TRON Forum(http://www.tron.org) at 2022/04.
  10:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *
  11:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *----------------------------------------------------------------------
  12:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  */
  13:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** /*
  14:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *	syslib.h
  15:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *
  16:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *	micro T-Kernel System Library  (RX65N depended)
  17:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  */
  18:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 
  19:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #ifndef __TK_SYSLIB_CPU_DEPEND_H__
  20:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #define __TK_SYSLIB_CPU_DEPEND_H__
  21:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 
  22:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #include "../core/rxv2/syslib.h"
  23:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 
  24:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** /*----------------------------------------------------------------------*/
  25:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** /*
  26:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  * Interrupt controller Control
  27:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *
  28:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  */
  29:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #define IM_LEVEL	0x0004		/* Level trigger */
  30:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #define IM_EDGE		0x0000		/* Edge trigger */
  31:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 
  32:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #define IM_HI		0x0000		/* H level/Interrupt at rising edge */
  33:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #define IM_LOW		0x0001		/* L level/Interrupt at falling edge */
  34:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #define IM_BOTH		0x0003		/* L level/Interrupt at both edge */
  35:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 
  36:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 
  37:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** /* 
  38:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  * Set Software Configurable Interrupt (PERIA & PERIB)
  39:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  */
  40:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** IMPORT ER SetPERI(UINT intno, UINT fctno);
  41:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 
  42:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 
  43:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** /* ------------------------------------------------------------------------ */
  44:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** /*
  45:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  * I/O port access
  46:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *	for memory mapped I/O
  47:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  */
  48:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** Inline void out_w( UW port, UW data )
  49:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** {
   8                             		.loc 1 49 1
   9 0000 7E AA                   		push.l	r10
  10                             	.LCFI0:
  11 0002 71 0A F8                		add	#-8, r0, r10
  12                             	.LCFI1:
  13 0005 EF A0                   		mov.L	r10, r0
  14 0007 E3 A1                   		mov.L	r1, [r10]
  15 0009 E7 A2 01                		mov.L	r2, 4[r10]
  50:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 	*(_UW*)port = data;
  16                             		.loc 1 50 3
  17 000c EC A5                   		mov.L	[r10], r5
  18                             		.loc 1 50 14
  19 000e ED A4 01                		mov.L	4[r10], r4
  20 0011 E3 54                   		mov.L	r4, [r5]
  51:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** }
  21                             		.loc 1 51 1
  22 0013 03                      		nop
  23 0014 3F AA 03                		rtsd	#12, r10-r10
  24                             	.LFE0:
  27                             	_out_h:
  28                             	.LFB1:
  52:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** Inline void out_h( UW port, UH data )
  53:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** {
  29                             		.loc 1 53 1
  30 0017 7E AA                   		push.l	r10
  31                             	.LCFI2:
  32 0019 71 0A F8                		add	#-8, r0, r10
  33                             	.LCFI3:
  34 001c EF A0                   		mov.L	r10, r0
  35 001e E3 A1                   		mov.L	r1, [r10]
  36 0020 D7 A2 02                		mov.W	r2, 4[r10]
  54:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 	*(_UH*)port = data;
  37                             		.loc 1 54 3
  38 0023 EC A5                   		mov.L	[r10], r5
  39                             		.loc 1 54 14
  40 0025 DD A4 02                		mov.W	4[r10], r4
  41 0028 D3 54                   		mov.W	r4, [r5]
  55:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** }
  42                             		.loc 1 55 1
  43 002a 03                      		nop
  44 002b 3F AA 03                		rtsd	#12, r10-r10
  45                             	.LFE1:
  48                             	_out_b:
  49                             	.LFB2:
  56:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** Inline void out_b( UW port, UB data )
  57:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** {
  50                             		.loc 1 57 1
  51 002e 7E AA                   		push.l	r10
  52                             	.LCFI4:
  53 0030 71 0A F8                		add	#-8, r0, r10
  54                             	.LCFI5:
  55 0033 EF A0                   		mov.L	r10, r0
  56 0035 E3 A1                   		mov.L	r1, [r10]
  57 0037 C7 A2 04                		mov.B	r2, 4[r10]
  58:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 	*(_UB*)port = data;
  58                             		.loc 1 58 3
  59 003a EC A5                   		mov.L	[r10], r5
  60                             		.loc 1 58 14
  61 003c CD A4 04                		mov.B	4[r10], r4
  62 003f C3 54                   		mov.B	r4, [r5]
  59:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_rskrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** }
  63                             		.loc 1 59 1
  64 0041 03                      		nop
  65 0042 3F AA 03                		rtsd	#12, r10-r10
  66                             	.LFE2:
  68                             		.section C,"a",@progbits
  69                             		.p2align 2
  70                             		.balign 4
  73                             	_mstop_tbl:
  74 0000 10 00 08 00             		.long	0x80010
  75 0004 CF 7F F5 46             		.long	0x46f57fcf
  76 0008 14 00 08 00             		.long	0x80014
  77 000c FF FF DF FF             		.long	-2097153
  78 0010 18 00 08 00             		.long	0x80018
  79 0014 00 00 FF F7             		.long	-134283264
  80 0018 1C 00 08 00             		.long	0x8001c
  81 001c 00 FF FF FF             		.long	-256
  82 0020 00 00 00 00             		.long	0
  83 0024 00 00 00 00             		.long	0
  84                             		.balign 4
  87                             	_pinfnc_tbl:
  88 0028 D1 C1 08 00             		.long	0x8c1d1
  89 002c 0A 00 00 00             		.long	10
  90 0030 D2 C1 08 00             		.long	0x8c1d2
  91 0034 0A 00 00 00             		.long	10
  92 0038 4A C1 08 00             		.long	0x8c14a
  93 003c 0F 00 00 00             		.long	15
  94 0040 4B C1 08 00             		.long	0x8c14b
  95 0044 0F 00 00 00             		.long	15
  96 0048 60 C1 08 00             		.long	0x8c160
  97 004c 80 00 00 00             		.long	0x80
  98 0050 00 00 00 00             		.long	0
  99 0054 00 00 00 00             		.long	0
 100                             		.balign 4
 103                             	_portmode_tbl:
 104 0058 72 C0 08 00             		.long	0x8c072
 105 005c 06 00 00 00             		.long	6
 106 0060 32 C0 08 00             		.long	0x8c032
 107 0064 04 00 00 00             		.long	4
 108 0068 12 C0 08 00             		.long	0x8c012
 109 006c 04 00 00 00             		.long	4
 110 0070 61 C0 08 00             		.long	0x8c061
 111 0074 0C 00 00 00             		.long	12
 112 0078 C1 C0 08 00             		.long	0x8c0c1
 113 007c 0C 00 00 00             		.long	12
 114 0080 64 C0 08 00             		.long	0x8c064
 115 0084 00 00 00 00             		.long	0
 116 0088 04 C0 08 00             		.long	0x8c004
 117 008c 00 00 00 00             		.long	0
 118 0090 00 00 00 00             		.long	0
 119 0094 00 00 00 00             		.long	0
 120                             		.section P,"ax"
 121                             		.global	_knl_startup_hw
 123                             	_knl_startup_hw:
 124                             	.LFB19:
 125                             		.file 2 "../kernel/sysdepend/rsk_rx65n/hw_setting.c"
   1:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** /*
   2:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *----------------------------------------------------------------------
   3:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *    micro T-Kernel 3.0 BSP
   4:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *
   5:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *    Copyright (C) 2022 by Ken Sakamura.
   6:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *    This software is distributed under the T-License 2.2.
   7:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *----------------------------------------------------------------------
   8:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *
   9:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *    Released by TRON Forum(http://www.tron.org) at 2022.04.
  10:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *
  11:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *----------------------------------------------------------------------
  12:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  */
  13:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
  14:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** #include <sys/machine.h>
  15:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** #ifdef RSK_RX65N
  16:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
  17:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** /*
  18:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *	hw_setting.c (Renesas Starter Kit+ for RX65N)
  19:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *	startup / shoutdown processing for hardware
  20:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *	
  21:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *	Pin function Setting (for IoT-Engine Starter board)
  22:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *		PJ1  : SCI8 RXD8
  23:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *		PJ2  : SCI8 TXD8
  24:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *
  25:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *		(USE_SDEV_DRV)
  26:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *		P12  : RIIC0 SCL0
  27:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *		P13  : RIIC0 SDA0
  28:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *		P40  : AN000
  29:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  */
  30:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
  31:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** #include "kernel.h"
  32:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** #include <tm/tmonitor.h>
  33:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
  34:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** #include "sysdepend.h"
  35:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
  36:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** /* ------------------------------------------------------------------------ */
  37:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** /* 
  38:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  * Setup register data 
  39:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  */
  40:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** typedef struct {
  41:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	UW	addr;
  42:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	UW	data;
  43:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** } T_SETUP_REG;
  44:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
  45:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** /* 
  46:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  * Setup module stop Tadle
  47:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  */
  48:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** LOCAL const T_SETUP_REG mstop_tbl[] = {
  49:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** #if !USE_SDEV_DRV	// Do not use sample device driver
  50:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{ MSTPCRA, 0x46FF7FCF },	/* Enable EXDMAC, DMAC/DTC, CMT0-1, TMR0-3 */
  51:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{ MSTPCRB, 0xFFFFFFFF },
  52:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{ MSTPCRC, 0xF7FF0000 },	/* Enable SCI8, Disable Deep-Sleep mode, Enable RAM */
  53:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{ MSTPCRD, 0xFFFFFF00 },
  54:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
  55:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** #else			// Use the sample device driver
  56:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{ MSTPCRA, 0x46F57FCF },	/* Enable EXDMAC, DMAC/DTC, S12AD0, CMT0-1, TMR0-3 */
  57:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{ MSTPCRB, 0xFFDFFFFF },	/* Enable RIIC0 */
  58:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{ MSTPCRC, 0xF7FF0000 },	/* Enable SCI8, Disable Deep-Sleep mode, Enable RAM */
  59:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{ MSTPCRD, 0xFFFFFF00 },
  60:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
  61:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** #endif /* !USE_SDEV_DRV */
  62:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{0, 0}
  63:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** };
  64:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
  65:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** /* 
  66:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  * Setup pin functions Tadle
  67:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  */
  68:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** LOCAL const T_SETUP_REG pinfnc_tbl[] = {
  69:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{MPC_PJnPFS(1), 0x0A},		/* PJ1 = SCI8 RXD8 */
  70:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{MPC_PJnPFS(2), 0x0A},		/* PJ2 = SCI8 TXD8 */
  71:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
  72:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** #if USE_SDEV_DRV	// Use the sample device driver
  73:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{MPC_P1nPFS(2), 0x0F},		/* P12 = RIIC0 SCL0 */
  74:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{MPC_P1nPFS(3), 0x0F},		/* P13 = RIIC0 SDA0 */
  75:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{MPC_P4nPFS(0), 0x80},		/* P40 = AN000 */
  76:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
  77:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** #endif /* USE_SDEV_DRV */
  78:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{0, 0}
  79:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** };
  80:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
  81:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** /* 
  82:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  * Setup port mode Tadle
  83:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  */
  84:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** LOCAL const T_SETUP_REG portmode_tbl[] = {
  85:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	/* PJ1:SCI8 RXD8 PJ2:SCI8 TXD8 */
  86:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{PORTJ_PMR, 0x06},		/* PJ1&PJ2 peripheral function. */
  87:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{PORTJ_PODR, 0x04},		/* PJ2 = 'H' */
  88:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{PORTJ_PDR, 0x04},		/* PJ2 output port */
  89:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
  90:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** #if USE_SDEV_DRV	// Use the sample device driver
  91:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	/*  P12:RIIC0_SCL0 P13:RIIC0_SDA0 */
  92:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{PORT1_PMR, 0x0C},		/* P12&P13  peripheral function. */
  93:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{PORT1_PCR, 0x0C},		/* P12&P13 Pull-up */
  94:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	/* P40:AN000 */
  95:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{PORT4_PMR, 0x00},		/* P40  AN000 */
  96:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{PORT4_PDR, 0x00},
  97:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
  98:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** #endif /* USE_SDEV_DRV */
  99:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
 100:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	{0, 0}
 101:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** };
 102:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
 103:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** /*
 104:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  * Startup hardware
 105:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  */
 106:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** EXPORT void knl_startup_hw(void)
 107:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** {
 126                             		.loc 2 107 1
 127 0045 7E AA                   		push.l	r10
 128                             	.LCFI6:
 129 0047 71 0A FC                		add	#-4, r0, r10
 130                             	.LCFI7:
 131 004a EF A0                   		mov.L	r10, r0
 108:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	const T_SETUP_REG	*p;
 109:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
 110:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	/* Setup module stop */
 111:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	out_h(SYSTEM_PRCR, 0xA502);		/* Disable Register Protect */
 132                             		.loc 2 111 2
 133 004c FB 2A 02 A5             		mov	#-23294, r2
 134 0050 FB 1E FE 03 08          		mov.L	#0x803fe, r1
 135 0055 39 C2 FF                		bsr	_out_h
 112:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	for(p = mstop_tbl; p->addr != 0; p++) {
 136                             		.loc 2 112 8
 137 0058 F8 A2 00 00 00 00       		mov.L	#_mstop_tbl, [r10]
 138                             		.loc 2 112 2
 139 005e 2E 17                   		bra	.L5
 140                             	.L6:
 113:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 		out_w(p->addr, p->data);
 141                             		.loc 2 113 3 discriminator 3
 142 0060 EC A5                   		mov.L	[r10], r5
 143 0062 EC 54                   		mov.L	[r5], r4
 144 0064 EC A5                   		mov.L	[r10], r5
 145 0066 A8 5D                   		mov.L	4[r5], r5
 146 0068 EF 52                   		mov.L	r5, r2
 147 006a EF 41                   		mov.L	r4, r1
 148 006c 39 94 FF                		bsr	_out_w
 112:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	for(p = mstop_tbl; p->addr != 0; p++) {
 149                             		.loc 2 112 36 discriminator 3
 150 006f EC A5                   		mov.L	[r10], r5
 151 0071 62 85                   		add	#8, r5
 152 0073 E3 A5                   		mov.L	r5, [r10]
 153                             	.L5:
 112:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	for(p = mstop_tbl; p->addr != 0; p++) {
 154                             		.loc 2 112 22 discriminator 1
 155 0075 EC A5                   		mov.L	[r10], r5
 156 0077 EC 55                   		mov.L	[r5], r5
 112:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	for(p = mstop_tbl; p->addr != 0; p++) {
 157                             		.loc 2 112 2 discriminator 1
 158 0079 61 05                   		cmp	#0, r5
 159 007b 21 E5                   		bne	.L6
 114:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	}
 115:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	out_h(SYSTEM_PRCR, 0xA500);		/* Enable Register protect */
 160                             		.loc 2 115 2
 161 007d FB 2A 00 A5             		mov	#-23296, r2
 162 0081 FB 1E FE 03 08          		mov.L	#0x803fe, r1
 163 0086 39 91 FF                		bsr	_out_h
 116:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
 117:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	/* Setup Pin Function */
 118:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	out_b(MPC_PWPR, 0);
 164                             		.loc 2 118 2
 165 0089 66 02                   		mov	#0, r2
 166 008b FB 1E 1F C1 08          		mov.L	#0x8c11f, r1
 167 0090 39 9E FF                		bsr	_out_b
 119:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	out_b(MPC_PWPR, MPC_PWMR_PFSWE);	/* Disable Register Protect */
 168                             		.loc 2 119 2
 169 0093 75 42 40                		mov	#0x40, r2
 170 0096 FB 1E 1F C1 08          		mov.L	#0x8c11f, r1
 171 009b 39 93 FF                		bsr	_out_b
 120:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	for(p = pinfnc_tbl; p->addr != 0; p++) {
 172                             		.loc 2 120 8
 173 009e F8 A2 28 00 00 00       		mov.L	#_pinfnc_tbl, [r10]
 174                             		.loc 2 120 2
 175 00a4 2E 17                   		bra	.L7
 176                             	.L8:
 121:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 		out_b(p->addr, (UB)p->data);
 177                             		.loc 2 121 3 discriminator 3
 178 00a6 EC A5                   		mov.L	[r10], r5
 179 00a8 EC 54                   		mov.L	[r5], r4
 180                             		.loc 2 121 23 discriminator 3
 181 00aa EC A5                   		mov.L	[r10], r5
 182 00ac A8 5D                   		mov.L	4[r5], r5
 183                             		.loc 2 121 3 discriminator 3
 184 00ae CF 52                   		mov.B	r5, r2
 185 00b0 EF 41                   		mov.L	r4, r1
 186 00b2 39 7C FF                		bsr	_out_b
 120:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	for(p = pinfnc_tbl; p->addr != 0; p++) {
 187                             		.loc 2 120 37 discriminator 3
 188 00b5 EC A5                   		mov.L	[r10], r5
 189 00b7 62 85                   		add	#8, r5
 190 00b9 E3 A5                   		mov.L	r5, [r10]
 191                             	.L7:
 120:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	for(p = pinfnc_tbl; p->addr != 0; p++) {
 192                             		.loc 2 120 23 discriminator 1
 193 00bb EC A5                   		mov.L	[r10], r5
 194 00bd EC 55                   		mov.L	[r5], r5
 120:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	for(p = pinfnc_tbl; p->addr != 0; p++) {
 195                             		.loc 2 120 2 discriminator 1
 196 00bf 61 05                   		cmp	#0, r5
 197 00c1 21 E5                   		bne	.L8
 122:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	}
 123:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	out_b(MPC_PWPR, MPC_PWMR_B0WI);		/* Enable Register protect */
 198                             		.loc 2 123 2
 199 00c3 FB 26 80                		mov	#-128, r2
 200 00c6 FB 1E 1F C1 08          		mov.L	#0x8c11f, r1
 201 00cb 39 63 FF                		bsr	_out_b
 124:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
 125:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	/* Setup port mode */
 126:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	for(p = portmode_tbl; p->addr != 0; p++) {
 202                             		.loc 2 126 8
 203 00ce F8 A2 58 00 00 00       		mov.L	#_portmode_tbl, [r10]
 204                             		.loc 2 126 2
 205 00d4 2E 17                   		bra	.L9
 206                             	.L10:
 127:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 		out_b(p->addr, (UB)p->data);
 207                             		.loc 2 127 3 discriminator 3
 208 00d6 EC A5                   		mov.L	[r10], r5
 209 00d8 EC 54                   		mov.L	[r5], r4
 210                             		.loc 2 127 23 discriminator 3
 211 00da EC A5                   		mov.L	[r10], r5
 212 00dc A8 5D                   		mov.L	4[r5], r5
 213                             		.loc 2 127 3 discriminator 3
 214 00de CF 52                   		mov.B	r5, r2
 215 00e0 EF 41                   		mov.L	r4, r1
 216 00e2 39 4C FF                		bsr	_out_b
 126:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 		out_b(p->addr, (UB)p->data);
 217                             		.loc 2 126 39 discriminator 3
 218 00e5 EC A5                   		mov.L	[r10], r5
 219 00e7 62 85                   		add	#8, r5
 220 00e9 E3 A5                   		mov.L	r5, [r10]
 221                             	.L9:
 126:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 		out_b(p->addr, (UB)p->data);
 222                             		.loc 2 126 25 discriminator 1
 223 00eb EC A5                   		mov.L	[r10], r5
 224 00ed EC 55                   		mov.L	[r5], r5
 126:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 		out_b(p->addr, (UB)p->data);
 225                             		.loc 2 126 2 discriminator 1
 226 00ef 61 05                   		cmp	#0, r5
 227 00f1 21 E5                   		bne	.L10
 128:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	}	
 129:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
 130:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	startup_clock();			/* Startup CPU Clock */
 228                             		.loc 2 130 2
 229 00f3 05 00 00 00             		bsr	_startup_clock
 131:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** }
 230                             		.loc 2 131 1
 231 00f7 03                      		nop
 232 00f8 3F AA 02                		rtsd	#8, r10-r10
 233                             	.LFE19:
 235                             		.global	_knl_shutdown_hw
 237                             	_knl_shutdown_hw:
 238                             	.LFB20:
 132:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
 133:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** #if USE_SHUTDOWN
 134:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** /*
 135:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  * Shutdown hardware
 136:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  */
 137:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** EXPORT void knl_shutdown_hw( void )
 138:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** {
 239                             		.loc 2 138 1
 240 00fb 7E AA                   		push.l	r10
 241                             	.LCFI8:
 242 00fd EF 0A                   		mov.L	r0, r10
 243                             	.LCFI9:
 139:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	disint();
 244                             		.loc 2 139 2
 245 00ff 05 00 00 00             		bsr	_disint
 140:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	shutdown_clock();
 246                             		.loc 2 140 2
 247 0103 05 00 00 00             		bsr	_shutdown_clock
 248                             	.L12:
 141:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
 142:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	while(1);
 249                             		.loc 2 142 7 discriminator 1
 250 0107 2E 00                   		bra	.L12
 251                             	.LFE20:
 253                             		.section C,"a",@progbits
 254                             		.p2align 2
 255                             	.LC0:
 256 0098 0A 3C 3C 20 53 59 53 54 		.string	"\n<< SYSTEM RESET & RESTART >>\n"
 256      45 4D 20 52 45 53 45 54 
 256      20 26 20 52 45 53 54 41 
 256      52 54 20 3E 3E 0A 00 
 257                             	.LC1:
 258 00b7 0A 3C 3C 20 53 59 53 54 		.string	"\n<< SYSTEM FAST RESTART >>\n"
 258      45 4D 20 46 41 53 54 20 
 258      52 45 53 54 41 52 54 20 
 258      3E 3E 0A 00 
 259                             	.LC2:
 260 00d3 0A 3C 3C 20 53 59 53 54 		.string	"\n<< SYSTEM RESTART >>\n"
 260      45 4D 20 52 45 53 54 41 
 260      52 54 20 3E 3E 0A 00 
 261 00ea 00 00                   		.section P,"ax"
 262                             		.global	_knl_restart_hw
 264                             	_knl_restart_hw:
 265                             	.LFB21:
 143:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** }
 144:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** #endif /* USE_SHUTDOWN */
 145:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 
 146:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** /*
 147:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  * Re-start hardware
 148:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *	mode = -1		reset and re-start	(Reset -> Boot -> Start)
 149:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *	mode = -2		fast re-start		(Start)
 150:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  *	mode = -3		Normal re-start		(Boot -> Start)
 151:../kernel/sysdepend/rsk_rx65n/hw_setting.c ****  */
 152:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** EXPORT ER knl_restart_hw( W mode )
 153:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** {
 266                             		.loc 2 153 1
 267 0109 7E AA                   		push.l	r10
 268                             	.LCFI10:
 269 010b 71 0A FC                		add	#-4, r0, r10
 270                             	.LCFI11:
 271 010e EF A0                   		mov.L	r10, r0
 272 0110 E3 A1                   		mov.L	r1, [r10]
 154:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	switch(mode) {
 273                             		.loc 2 154 2
 274 0112 EC A5                   		mov.L	[r10], r5
 275 0114 75 05 FE                		cmp	#-2, r5
 276 0117 20 20                   		beq	.L14
 277 0119 EC A5                   		mov.L	[r10], r5
 278 011b 75 05 FF                		cmp	#-1, r5
 279 011e 12                      		beq	.L15
 280 011f EC A5                   		mov.L	[r10], r5
 281 0121 75 05 FD                		cmp	#-3, r5
 282 0124 20 22                   		beq	.L16
 283 0126 2E 2E                   		bra	.L19
 284                             	.L15:
 155:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	case -1: /* Reset and re-start */
 156:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 		SYSTEM_MESSAGE("\n<< SYSTEM RESET & RESTART >>\n");
 285                             		.loc 2 156 3
 286 0128 FB 12 98 00 00 00       		mov.L	#.LC0, r1
 287 012e 05 00 00 00             		bsr	_tm_putstring
 157:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 		return E_NOSPT;
 288                             		.loc 2 157 10
 289 0132 FB 56 F7                		mov.L	#-9, r5
 290 0135 2E 23                   		bra	.L18
 291                             	.L14:
 158:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	case -2: /* fast re-start */
 159:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 		SYSTEM_MESSAGE("\n<< SYSTEM FAST RESTART >>\n");
 292                             		.loc 2 159 3
 293 0137 FB 12 B7 00 00 00       		mov.L	#.LC1, r1
 294 013d 05 00 00 00             		bsr	_tm_putstring
 160:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 		return E_NOSPT;
 295                             		.loc 2 160 10
 296 0141 FB 56 F7                		mov.L	#-9, r5
 297 0144 2E 14                   		bra	.L18
 298                             	.L16:
 161:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	case -3: /* Normal re-start */
 162:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 		SYSTEM_MESSAGE("\n<< SYSTEM RESTART >>\n");
 299                             		.loc 2 162 3
 300 0146 FB 12 D3 00 00 00       		mov.L	#.LC2, r1
 301 014c 05 00 00 00             		bsr	_tm_putstring
 163:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 		return E_NOSPT;
 302                             		.loc 2 163 10
 303 0150 FB 56 F7                		mov.L	#-9, r5
 304 0153 0D                      		bra	.L18
 305                             	.L19:
 164:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	default:
 165:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 		return E_PAR;
 306                             		.loc 2 165 10
 307 0154 FB 56 EF                		mov.L	#-17, r5
 308 0157 03                      		.balign 8,3,1
 309                             	.L18:
 166:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** 	}
 167:../kernel/sysdepend/rsk_rx65n/hw_setting.c **** }
 310                             		.loc 2 167 1
 311 0158 EF 51                   		mov.L	r5, r1
 312 015a 3F AA 02                		rtsd	#8, r10-r10
 313                             	.LFE21:
 446                             	.Letext0:
 447                             		.file 3 "D:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_rskrx65n\\include/tk/typedef.h"
 448                             		.file 4 "D:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_rskrx65n\\include/tk/syscall.h"
 449                             		.file 5 "D:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_rskrx65n\\include/sys/queue.h"
 450                             		.file 6 "D:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_rskrx65n\\kernel\\knlinc/kernel.h"
 451                             		.file 7 "d:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_rskrx65n\\kernel\\tkernel\\timer.h"
 452                             		.file 8 "d:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_rskrx65n\\kernel\\tkernel\\winfo.h"
 453                             		.file 9 "d:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_rskrx65n\\kernel\\tkernel\\mutex.h"
 454                             		.file 10 "d:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_rskrx65n\\kernel\\sysdepend\\cpu\\core\\rxv2\\sysd
 455                             		.file 11 "d:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_rskrx65n\\kernel\\sysdepend\\cpu\\core\\rxv2\\cpu_
 456                             		.file 12 "../kernel/sysdepend/rsk_rx65n/../cpu/rx65n/sysdepend.h"
