   1                             		.file	"hw_setting.c"
   2                             		.section P,"ax"
   3                             	.Ltext0:
   5                             	_out_w:
   6                             	.LFB0:
   7                             		.file 1 "d:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\include\\tk\\sysdepend\\cpu\\rx65n\\syslib
   1:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** /*
   2:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *----------------------------------------------------------------------
   3:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *    micro T-Kernel 3.00.06.B0
   4:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *
   5:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *    Copyright (C) 2022 by Ken Sakamura.
   6:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *    This software is distributed under the T-License 2.2.
   7:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *----------------------------------------------------------------------
   8:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *
   9:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *    Released by TRON Forum(http://www.tron.org) at 2022/04.
  10:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *
  11:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *----------------------------------------------------------------------
  12:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  */
  13:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** /*
  14:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *	syslib.h
  15:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *
  16:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *	micro T-Kernel System Library  (RX65N depended)
  17:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  */
  18:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 
  19:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #ifndef __TK_SYSLIB_CPU_DEPEND_H__
  20:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #define __TK_SYSLIB_CPU_DEPEND_H__
  21:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 
  22:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #include "../core/rxv2/syslib.h"
  23:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 
  24:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** /*----------------------------------------------------------------------*/
  25:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** /*
  26:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  * Interrupt controller Control
  27:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *
  28:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  */
  29:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #define IM_LEVEL	0x0004		/* Level trigger */
  30:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #define IM_EDGE		0x0000		/* Edge trigger */
  31:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 
  32:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #define IM_HI		0x0000		/* H level/Interrupt at rising edge */
  33:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #define IM_LOW		0x0001		/* L level/Interrupt at falling edge */
  34:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** #define IM_BOTH		0x0003		/* L level/Interrupt at both edge */
  35:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 
  36:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** /* ------------------------------------------------------------------------ */
  37:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** /*
  38:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  * I/O port access
  39:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  *	for memory mapped I/O
  40:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h ****  */
  41:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** Inline void out_w( UW port, UW data )
  42:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** {
   8                             		.loc 1 42 1
   9 0000 7E AA                   		push.l	r10
  10                             	.LCFI0:
  11 0002 71 0A F8                		add	#-8, r0, r10
  12                             	.LCFI1:
  13 0005 EF A0                   		mov.L	r10, r0
  14 0007 E3 A1                   		mov.L	r1, [r10]
  15 0009 E7 A2 01                		mov.L	r2, 4[r10]
  43:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 	*(_UW*)port = data;
  16                             		.loc 1 43 3
  17 000c EC A5                   		mov.L	[r10], r5
  18                             		.loc 1 43 14
  19 000e ED A4 01                		mov.L	4[r10], r4
  20 0011 E3 54                   		mov.L	r4, [r5]
  44:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** }
  21                             		.loc 1 44 1
  22 0013 03                      		nop
  23 0014 3F AA 03                		rtsd	#12, r10-r10
  24                             	.LFE0:
  27                             	_out_h:
  28                             	.LFB1:
  45:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** Inline void out_h( UW port, UH data )
  46:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** {
  29                             		.loc 1 46 1
  30 0017 7E AA                   		push.l	r10
  31                             	.LCFI2:
  32 0019 71 0A F8                		add	#-8, r0, r10
  33                             	.LCFI3:
  34 001c EF A0                   		mov.L	r10, r0
  35 001e E3 A1                   		mov.L	r1, [r10]
  36 0020 D7 A2 02                		mov.W	r2, 4[r10]
  47:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 	*(_UH*)port = data;
  37                             		.loc 1 47 3
  38 0023 EC A5                   		mov.L	[r10], r5
  39                             		.loc 1 47 14
  40 0025 DD A4 02                		mov.W	4[r10], r4
  41 0028 D3 54                   		mov.W	r4, [r5]
  48:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** }
  42                             		.loc 1 48 1
  43 002a 03                      		nop
  44 002b 3F AA 03                		rtsd	#12, r10-r10
  45                             	.LFE1:
  48                             	_out_b:
  49                             	.LFB2:
  49:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** Inline void out_b( UW port, UB data )
  50:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** {
  50                             		.loc 1 50 1
  51 002e 7E AA                   		push.l	r10
  52                             	.LCFI4:
  53 0030 71 0A F8                		add	#-8, r0, r10
  54                             	.LCFI5:
  55 0033 EF A0                   		mov.L	r10, r0
  56 0035 E3 A1                   		mov.L	r1, [r10]
  57 0037 C7 A2 04                		mov.B	r2, 4[r10]
  51:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** 	*(_UB*)port = data;
  58                             		.loc 1 51 3
  59 003a EC A5                   		mov.L	[r10], r5
  60                             		.loc 1 51 14
  61 003c CD A4 04                		mov.B	4[r10], r4
  62 003f C3 54                   		mov.B	r4, [r5]
  52:d:\tkernel_dev\mtk3_bsp\dev_bsp_b2_tbrx65n\include\tk\sysdepend\cpu\rx65n\syslib.h **** }
  63                             		.loc 1 52 1
  64 0041 03                      		nop
  65 0042 3F AA 03                		rtsd	#12, r10-r10
  66                             	.LFE2:
  68                             		.section C,"a",@progbits
  69                             		.p2align 2
  70                             		.balign 4
  73                             	_mstop_tbl:
  74 0000 10 00 08 00             		.long	0x80010
  75 0004 CF 7F FF 46             		.long	0x46ff7fcf
  76 0008 14 00 08 00             		.long	0x80014
  77 000c FF FF FF FF             		.long	-1
  78 0010 18 00 08 00             		.long	0x80018
  79 0014 00 00 FF FF             		.long	-65536
  80 0018 1C 00 08 00             		.long	0x8001c
  81 001c 00 FF FF FF             		.long	-256
  82 0020 00 00 00 00             		.long	0
  83 0024 00 00 00 00             		.long	0
  84                             		.balign 4
  87                             	_pinfnc_tbl:
  88 0028 00 00 00 00 00 00 00 00 		.zero	8
  89                             		.balign 4
  92                             	_portmode_tbl:
  93 0030 2D C0 08 00             		.long	0x8c02d
  94 0034 C0 00 00 00             		.long	0xc0
  95 0038 0D C0 08 00             		.long	0x8c00d
  96 003c C0 00 00 00             		.long	0xc0
  97 0040 00 00 00 00             		.long	0
  98 0044 00 00 00 00             		.long	0
  99                             		.section P,"ax"
 100                             		.global	_knl_startup_hw
 102                             	_knl_startup_hw:
 103                             	.LFB19:
 104                             		.file 2 "../kernel/sysdepend/rtb_rx65n/hw_setting.c"
   1:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** /*
   2:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *----------------------------------------------------------------------
   3:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *    micro T-Kernel 3.00.06.B0
   4:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *
   5:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *    Copyright (C) 2022 by Ken Sakamura.
   6:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *    This software is distributed under the T-License 2.2.
   7:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *----------------------------------------------------------------------
   8:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *
   9:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *    Released by TRON Forum(http://www.tron.org) at 2022/04.
  10:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *
  11:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *----------------------------------------------------------------------
  12:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  */
  13:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
  14:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** #include <sys/machine.h>
  15:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** #ifdef RTB_RX65N
  16:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
  17:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** /*
  18:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *	hw_setting.c (Renesas Starter Kit+ for RX65N)
  19:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *	startup / shoutdown processing for hardware
  20:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *	
  21:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *	Pin function Setting (for IoT-Engine Starter board)
  22:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *		PB1  : SW1
  23:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *		PD6  : LED0
  24:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *		PD7  : LED1
  25:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *
  26:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *		(USE_SDEV_DRV)
  27:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *		P12  : RIIC0 SCL0
  28:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *		P13  : RIIC0 SDA0
  29:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *		P40  : AN000
  30:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  */
  31:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
  32:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** #include "kernel.h"
  33:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** #include <tm/tmonitor.h>
  34:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
  35:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** #include "sysdepend.h"
  36:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
  37:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** /* ------------------------------------------------------------------------ */
  38:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** /* 
  39:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  * Setup register data 
  40:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  */
  41:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** typedef struct {
  42:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	UW	addr;
  43:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	UW	data;
  44:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** } T_SETUP_REG;
  45:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
  46:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** /* 
  47:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  * Setup module stop Tadle
  48:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  */
  49:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** LOCAL const T_SETUP_REG mstop_tbl[] = {
  50:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** #if !USE_SDEV_DRV	// Do not use sample device driver
  51:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	{ MSTPCRA, 0x46FF7FCF },	/* Enable EXDMAC, DMAC/DTC, CMT0-1, TMR0-3 */
  52:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	{ MSTPCRB, 0xFFFFFFFF },
  53:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	{ MSTPCRC, 0xFFFF0000 },
  54:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	{ MSTPCRD, 0xFFFFFF00 },
  55:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
  56:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** #else			// Use the sample device driver
  57:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	{ MSTPCRA, 0x46FF7FCF },	/* Enable EXDMAC, DMAC/DTC, CMT0-1, TMR0-3 */
  58:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	{ MSTPCRB, 0xFFFFFFFF },
  59:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	{ MSTPCRC, 0xFFFF0000 },
  60:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	{ MSTPCRD, 0xFFFFFF00 },
  61:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
  62:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** #endif /* !USE_SDEV_DRV */
  63:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	{0, 0}
  64:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** };
  65:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
  66:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** /* 
  67:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  * Setup pin functions Tadle
  68:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  */
  69:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** LOCAL const T_SETUP_REG pinfnc_tbl[] = {
  70:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
  71:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** #if USE_SDEV_DRV	// Use the sample device driver
  72:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
  73:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** #endif /* USE_SDEV_DRV */
  74:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	{0, 0}
  75:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** };
  76:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
  77:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** /* 
  78:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  * Setup port mode Tadle
  79:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  */
  80:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** LOCAL const T_SETUP_REG portmode_tbl[] = {
  81:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
  82:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** #if USE_SDEV_DRV	// Use the sample device driver
  83:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	/* PD6-7 : LED0-1 */
  84:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	{PORTD_PODR, 0xC0},	
  85:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	{PORTD_PDR, 0xC0},
  86:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** #endif /* USE_SDEV_DRV */
  87:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
  88:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	{0, 0}
  89:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** };
  90:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
  91:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** /*
  92:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  * Startup hardware
  93:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  */
  94:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** EXPORT void knl_startup_hw(void)
  95:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** {
 105                             		.loc 2 95 1
 106 0045 7E AA                   		push.l	r10
 107                             	.LCFI6:
 108 0047 71 0A FC                		add	#-4, r0, r10
 109                             	.LCFI7:
 110 004a EF A0                   		mov.L	r10, r0
  96:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	const T_SETUP_REG	*p;
  97:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
  98:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	/* Setup module stop */
  99:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	out_h(SYSTEM_PRCR, 0xA502);		/* Disable Register Protect */
 111                             		.loc 2 99 2
 112 004c FB 2A 02 A5             		mov	#-23294, r2
 113 0050 FB 1E FE 03 08          		mov.L	#0x803fe, r1
 114 0055 39 C2 FF                		bsr	_out_h
 100:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	for(p = mstop_tbl; p->addr != 0; p++) {
 115                             		.loc 2 100 8
 116 0058 F8 A2 00 00 00 00       		mov.L	#_mstop_tbl, [r10]
 117                             		.loc 2 100 2
 118 005e 2E 17                   		bra	.L5
 119                             	.L6:
 101:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 		out_w(p->addr, p->data);
 120                             		.loc 2 101 3 discriminator 3
 121 0060 EC A5                   		mov.L	[r10], r5
 122 0062 EC 54                   		mov.L	[r5], r4
 123 0064 EC A5                   		mov.L	[r10], r5
 124 0066 A8 5D                   		mov.L	4[r5], r5
 125 0068 EF 52                   		mov.L	r5, r2
 126 006a EF 41                   		mov.L	r4, r1
 127 006c 39 94 FF                		bsr	_out_w
 100:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	for(p = mstop_tbl; p->addr != 0; p++) {
 128                             		.loc 2 100 36 discriminator 3
 129 006f EC A5                   		mov.L	[r10], r5
 130 0071 62 85                   		add	#8, r5
 131 0073 E3 A5                   		mov.L	r5, [r10]
 132                             	.L5:
 100:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	for(p = mstop_tbl; p->addr != 0; p++) {
 133                             		.loc 2 100 22 discriminator 1
 134 0075 EC A5                   		mov.L	[r10], r5
 135 0077 EC 55                   		mov.L	[r5], r5
 100:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	for(p = mstop_tbl; p->addr != 0; p++) {
 136                             		.loc 2 100 2 discriminator 1
 137 0079 61 05                   		cmp	#0, r5
 138 007b 21 E5                   		bne	.L6
 102:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	}
 103:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	out_h(SYSTEM_PRCR, 0xA500);		/* Enable Register protect */
 139                             		.loc 2 103 2
 140 007d FB 2A 00 A5             		mov	#-23296, r2
 141 0081 FB 1E FE 03 08          		mov.L	#0x803fe, r1
 142 0086 39 91 FF                		bsr	_out_h
 104:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
 105:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	/* Setup Pin Function */
 106:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	out_b(MPC_PWPR, 0);
 143                             		.loc 2 106 2
 144 0089 66 02                   		mov	#0, r2
 145 008b FB 1E 1F C1 08          		mov.L	#0x8c11f, r1
 146 0090 39 9E FF                		bsr	_out_b
 107:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	out_b(MPC_PWPR, MPC_PWMR_PFSWE);	/* Disable Register Protect */
 147                             		.loc 2 107 2
 148 0093 75 42 40                		mov	#0x40, r2
 149 0096 FB 1E 1F C1 08          		mov.L	#0x8c11f, r1
 150 009b 39 93 FF                		bsr	_out_b
 108:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	for(p = pinfnc_tbl; p->addr != 0; p++) {
 151                             		.loc 2 108 8
 152 009e F8 A2 28 00 00 00       		mov.L	#_pinfnc_tbl, [r10]
 153                             		.loc 2 108 2
 154 00a4 2E 17                   		bra	.L7
 155                             	.L8:
 109:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 		out_b(p->addr, (UB)p->data);
 156                             		.loc 2 109 3 discriminator 3
 157 00a6 EC A5                   		mov.L	[r10], r5
 158 00a8 EC 54                   		mov.L	[r5], r4
 159                             		.loc 2 109 23 discriminator 3
 160 00aa EC A5                   		mov.L	[r10], r5
 161 00ac A8 5D                   		mov.L	4[r5], r5
 162                             		.loc 2 109 3 discriminator 3
 163 00ae CF 52                   		mov.B	r5, r2
 164 00b0 EF 41                   		mov.L	r4, r1
 165 00b2 39 7C FF                		bsr	_out_b
 108:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	for(p = pinfnc_tbl; p->addr != 0; p++) {
 166                             		.loc 2 108 37 discriminator 3
 167 00b5 EC A5                   		mov.L	[r10], r5
 168 00b7 62 85                   		add	#8, r5
 169 00b9 E3 A5                   		mov.L	r5, [r10]
 170                             	.L7:
 108:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	for(p = pinfnc_tbl; p->addr != 0; p++) {
 171                             		.loc 2 108 23 discriminator 1
 172 00bb EC A5                   		mov.L	[r10], r5
 173 00bd EC 55                   		mov.L	[r5], r5
 108:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	for(p = pinfnc_tbl; p->addr != 0; p++) {
 174                             		.loc 2 108 2 discriminator 1
 175 00bf 61 05                   		cmp	#0, r5
 176 00c1 21 E5                   		bne	.L8
 110:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	}
 111:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	out_b(MPC_PWPR, MPC_PWMR_B0WI);		/* Enable Register protect */
 177                             		.loc 2 111 2
 178 00c3 FB 26 80                		mov	#-128, r2
 179 00c6 FB 1E 1F C1 08          		mov.L	#0x8c11f, r1
 180 00cb 39 63 FF                		bsr	_out_b
 112:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
 113:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	/* Setup port mode */
 114:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	for(p = portmode_tbl; p->addr != 0; p++) {
 181                             		.loc 2 114 8
 182 00ce F8 A2 30 00 00 00       		mov.L	#_portmode_tbl, [r10]
 183                             		.loc 2 114 2
 184 00d4 2E 17                   		bra	.L9
 185                             	.L10:
 115:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 		out_b(p->addr, (UB)p->data);
 186                             		.loc 2 115 3 discriminator 3
 187 00d6 EC A5                   		mov.L	[r10], r5
 188 00d8 EC 54                   		mov.L	[r5], r4
 189                             		.loc 2 115 23 discriminator 3
 190 00da EC A5                   		mov.L	[r10], r5
 191 00dc A8 5D                   		mov.L	4[r5], r5
 192                             		.loc 2 115 3 discriminator 3
 193 00de CF 52                   		mov.B	r5, r2
 194 00e0 EF 41                   		mov.L	r4, r1
 195 00e2 39 4C FF                		bsr	_out_b
 114:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 		out_b(p->addr, (UB)p->data);
 196                             		.loc 2 114 39 discriminator 3
 197 00e5 EC A5                   		mov.L	[r10], r5
 198 00e7 62 85                   		add	#8, r5
 199 00e9 E3 A5                   		mov.L	r5, [r10]
 200                             	.L9:
 114:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 		out_b(p->addr, (UB)p->data);
 201                             		.loc 2 114 25 discriminator 1
 202 00eb EC A5                   		mov.L	[r10], r5
 203 00ed EC 55                   		mov.L	[r5], r5
 114:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 		out_b(p->addr, (UB)p->data);
 204                             		.loc 2 114 2 discriminator 1
 205 00ef 61 05                   		cmp	#0, r5
 206 00f1 21 E5                   		bne	.L10
 116:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	}	
 117:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
 118:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	startup_clock();			/* Startup CPU Clock */
 207                             		.loc 2 118 2
 208 00f3 05 00 00 00             		bsr	_startup_clock
 119:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** }
 209                             		.loc 2 119 1
 210 00f7 03                      		nop
 211 00f8 3F AA 02                		rtsd	#8, r10-r10
 212                             	.LFE19:
 214                             		.global	_knl_shutdown_hw
 216                             	_knl_shutdown_hw:
 217                             	.LFB20:
 120:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
 121:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** #if USE_SHUTDOWN
 122:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** /*
 123:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  * Shutdown hardware
 124:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  */
 125:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** EXPORT void knl_shutdown_hw( void )
 126:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** {
 218                             		.loc 2 126 1
 219 00fb 7E AA                   		push.l	r10
 220                             	.LCFI8:
 221 00fd EF 0A                   		mov.L	r0, r10
 222                             	.LCFI9:
 127:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	disint();
 223                             		.loc 2 127 2
 224 00ff 05 00 00 00             		bsr	_disint
 128:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	shutdown_clock();
 225                             		.loc 2 128 2
 226 0103 05 00 00 00             		bsr	_shutdown_clock
 227                             	.L12:
 129:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
 130:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	while(1);
 228                             		.loc 2 130 7 discriminator 1
 229 0107 2E 00                   		bra	.L12
 230                             	.LFE20:
 232                             		.section C,"a",@progbits
 233                             		.p2align 2
 234                             	.LC0:
 235 0048 0A 3C 3C 20 53 59 53 54 		.string	"\n<< SYSTEM RESET & RESTART >>\n"
 235      45 4D 20 52 45 53 45 54 
 235      20 26 20 52 45 53 54 41 
 235      52 54 20 3E 3E 0A 00 
 236                             	.LC1:
 237 0067 0A 3C 3C 20 53 59 53 54 		.string	"\n<< SYSTEM FAST RESTART >>\n"
 237      45 4D 20 46 41 53 54 20 
 237      52 45 53 54 41 52 54 20 
 237      3E 3E 0A 00 
 238                             	.LC2:
 239 0083 0A 3C 3C 20 53 59 53 54 		.string	"\n<< SYSTEM RESTART >>\n"
 239      45 4D 20 52 45 53 54 41 
 239      52 54 20 3E 3E 0A 00 
 240 009a 00 00                   		.section P,"ax"
 241                             		.global	_knl_restart_hw
 243                             	_knl_restart_hw:
 244                             	.LFB21:
 131:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** }
 132:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** #endif /* USE_SHUTDOWN */
 133:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 
 134:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** /*
 135:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  * Re-start hardware
 136:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *	mode = -1		reset and re-start	(Reset -> Boot -> Start)
 137:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *	mode = -2		fast re-start		(Start)
 138:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  *	mode = -3		Normal re-start		(Boot -> Start)
 139:../kernel/sysdepend/rtb_rx65n/hw_setting.c ****  */
 140:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** EXPORT ER knl_restart_hw( W mode )
 141:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** {
 245                             		.loc 2 141 1
 246 0109 7E AA                   		push.l	r10
 247                             	.LCFI10:
 248 010b 71 0A FC                		add	#-4, r0, r10
 249                             	.LCFI11:
 250 010e EF A0                   		mov.L	r10, r0
 251 0110 E3 A1                   		mov.L	r1, [r10]
 142:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	switch(mode) {
 252                             		.loc 2 142 2
 253 0112 EC A5                   		mov.L	[r10], r5
 254 0114 75 05 FE                		cmp	#-2, r5
 255 0117 20 20                   		beq	.L14
 256 0119 EC A5                   		mov.L	[r10], r5
 257 011b 75 05 FF                		cmp	#-1, r5
 258 011e 12                      		beq	.L15
 259 011f EC A5                   		mov.L	[r10], r5
 260 0121 75 05 FD                		cmp	#-3, r5
 261 0124 20 22                   		beq	.L16
 262 0126 2E 2E                   		bra	.L19
 263                             	.L15:
 143:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	case -1: /* Reset and re-start */
 144:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 		SYSTEM_MESSAGE("\n<< SYSTEM RESET & RESTART >>\n");
 264                             		.loc 2 144 3
 265 0128 FB 12 48 00 00 00       		mov.L	#.LC0, r1
 266 012e 05 00 00 00             		bsr	_tm_putstring
 145:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 		return E_NOSPT;
 267                             		.loc 2 145 10
 268 0132 FB 56 F7                		mov.L	#-9, r5
 269 0135 2E 23                   		bra	.L18
 270                             	.L14:
 146:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	case -2: /* fast re-start */
 147:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 		SYSTEM_MESSAGE("\n<< SYSTEM FAST RESTART >>\n");
 271                             		.loc 2 147 3
 272 0137 FB 12 67 00 00 00       		mov.L	#.LC1, r1
 273 013d 05 00 00 00             		bsr	_tm_putstring
 148:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 		return E_NOSPT;
 274                             		.loc 2 148 10
 275 0141 FB 56 F7                		mov.L	#-9, r5
 276 0144 2E 14                   		bra	.L18
 277                             	.L16:
 149:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	case -3: /* Normal re-start */
 150:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 		SYSTEM_MESSAGE("\n<< SYSTEM RESTART >>\n");
 278                             		.loc 2 150 3
 279 0146 FB 12 83 00 00 00       		mov.L	#.LC2, r1
 280 014c 05 00 00 00             		bsr	_tm_putstring
 151:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 		return E_NOSPT;
 281                             		.loc 2 151 10
 282 0150 FB 56 F7                		mov.L	#-9, r5
 283 0153 0D                      		bra	.L18
 284                             	.L19:
 152:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	default:
 153:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 		return E_PAR;
 285                             		.loc 2 153 10
 286 0154 FB 56 EF                		mov.L	#-17, r5
 287 0157 03                      		.balign 8,3,1
 288                             	.L18:
 154:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** 	}
 155:../kernel/sysdepend/rtb_rx65n/hw_setting.c **** }
 289                             		.loc 2 155 1
 290 0158 EF 51                   		mov.L	r5, r1
 291 015a 3F AA 02                		rtsd	#8, r10-r10
 292                             	.LFE21:
 425                             	.Letext0:
 426                             		.file 3 "D:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\include/tk/typedef.h"
 427                             		.file 4 "D:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\include/tk/syscall.h"
 428                             		.file 5 "D:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\include/sys/queue.h"
 429                             		.file 6 "D:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\kernel\\knlinc/kernel.h"
 430                             		.file 7 "d:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\kernel\\tkernel\\timer.h"
 431                             		.file 8 "d:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\kernel\\tkernel\\winfo.h"
 432                             		.file 9 "d:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\kernel\\tkernel\\mutex.h"
 433                             		.file 10 "d:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\kernel\\sysdepend\\cpu\\core\\rxv2\\sysde
 434                             		.file 11 "d:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\kernel\\sysdepend\\cpu\\core\\rxv2\\cpu_s
 435                             		.file 12 "../kernel/sysdepend/rtb_rx65n/../cpu/rx65n/sysdepend.h"
