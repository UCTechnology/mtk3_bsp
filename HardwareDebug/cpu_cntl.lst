   1                             		.file	"cpu_cntl.c"
   2                             		.section P,"ax"
   3                             	.Ltext0:
   4                             		.global	_knl_taskindp
   5                             		.section B,"w",@nobits
   6                             		.p2align 2
   7                             		.balign 4
  10                             	_knl_taskindp:
  11 0000 00 00 00 00             		.zero	4
  12                             		.global	_knl_tmp_stack
  13                             		.section	.noinit,"aw"
  16                             	_knl_tmp_stack:
  17 0000 00 00 00 00 00 00 00 00 		.zero	256
  17      00 00 00 00 00 00 00 00 
  17      00 00 00 00 00 00 00 00 
  17      00 00 00 00 00 00 00 00 
  17      00 00 00 00 00 00 00 00 
  18                             		.section P,"ax"
  19                             		.global	_knl_set_reg
  21                             	_knl_set_reg:
  22                             	.LFB22:
  23                             		.file 1 "../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c"
   1:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** /*
   2:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  *----------------------------------------------------------------------
   3:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  *    micro T-Kernel 3.00.03
   4:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  *
   5:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  *    Copyright (C) 2006-2021 by Ken Sakamura.
   6:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  *    This software is distributed under the T-License 2.2.
   7:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  *----------------------------------------------------------------------
   8:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  *
   9:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  *    Released by TRON Forum(http://www.tron.org) at 2021/03/31.
  10:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  *
  11:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  *----------------------------------------------------------------------
  12:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  */
  13:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
  14:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #include <sys/machine.h>
  15:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #ifdef CPU_CORE_RXV2
  16:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** /*
  17:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  *	cpu_cntl.c (RXv2)
  18:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  *	CPU-Dependent Control
  19:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  */
  20:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #include "kernel.h"
  21:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #include "../../../sysdepend.h"
  22:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
  23:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #include "cpu_task.h"
  24:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
  25:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
  26:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** /* ------------------------------------------------------------------------ */
  27:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** /*
  28:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  * Task independent status
  29:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  */
  30:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** EXPORT	W	knl_taskindp = 0;
  31:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
  32:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** /* ------------------------------------------------------------------------ */
  33:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** /* Temporal stack 
  34:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  *	used when 'dispatch_to_schedtsk' is called.
  35:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  */
  36:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
  37:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** Noinit(EXPORT UB knl_tmp_stack[TMP_STACK_SIZE]);
  38:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
  39:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #if defined(USE_FUNC_TK_SET_REG) || defined(USE_FUNC_TD_SET_REG)
  40:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** /* ------------------------------------------------------------------------ */
  41:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** /*
  42:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  * Set task register contents (Used in tk_set_reg())
  43:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  */
  44:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** EXPORT void knl_set_reg( TCB *tcb, CONST T_REGS *regs, CONST T_EIT *eit, CONST T_CREGS *cregs )
  45:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** {
  24                             		.loc 1 45 1
  25 0000 7E AA                   		push.l	r10
  26                             	.LCFI0:
  27 0002 71 0A E8                		add	#-24, r0, r10
  28                             	.LCFI1:
  29 0005 EF A0                   		mov.L	r10, r0
  30 0007 E7 A1 02                		mov.L	r1, 8[r10]
  31 000a E7 A2 03                		mov.L	r2, 12[r10]
  32 000d E7 A3 04                		mov.L	r3, 16[r10]
  33 0010 E7 A4 05                		mov.L	r4, 20[r10]
  46:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	SStackFrame	*ssp;
  47:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	INT		i;
  48:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
  49:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	ssp = (SStackFrame*)(( cregs != NULL )? cregs->ssp: tcb->tskctxb.ssp);
  34                             		.loc 1 49 8
  35 0013 ED A5 05                		mov.L	20[r10], r5
  36 0016 61 05                   		cmp	#0, r5
  37 0018 17                      		beq	.L2
  38                             		.loc 1 49 8 is_stmt 0 discriminator 1
  39 0019 ED A5 05                		mov.L	20[r10], r5
  40 001c EC 55                   		mov.L	[r5], r5
  41 001e 0E                      		bra	.L3
  42                             	.L2:
  43                             		.loc 1 49 8 discriminator 2
  44 001f ED A5 02                		mov.L	8[r10], r5
  45 0022 A9 D5                   		mov.L	24[r5], r5
  46                             	.L3:
  47                             		.loc 1 49 6 is_stmt 1 discriminator 4
  48 0024 E7 A5 01                		mov.L	r5, 4[r10]
  50:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
  51:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	if ( regs != NULL ) {
  49                             		.loc 1 51 5 discriminator 4
  50 0027 ED A5 03                		mov.L	12[r10], r5
  51 002a 61 05                   		cmp	#0, r5
  52 002c 20 23                   		beq	.L4
  52:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		for ( i = 0; i < 15; ++i ) {
  53                             		.loc 1 52 11
  54 002e F8 A6 00                		mov.L	#0, [r10]
  55                             		.loc 1 52 3
  56 0031 2E 18                   		bra	.L5
  57                             	.L6:
  53:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 			ssp->r[i] = regs->r[i];
  58                             		.loc 1 53 23 discriminator 3
  59 0033 ED A5 03                		mov.L	12[r10], r5
  60 0036 EC A4                   		mov.L	[r10], r4
  61 0038 FE 64 53                		mov.L	[r4,r5], r3
  62                             		.loc 1 53 14 discriminator 3
  63 003b ED A5 01                		mov.L	4[r10], r5
  64 003e EC A4                   		mov.L	[r10], r4
  65 0040 FE 24 53                		mov.L	r3, [r4,r5]
  52:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		for ( i = 0; i < 15; ++i ) {
  66                             		.loc 1 52 24 discriminator 3
  67 0043 EC A5                   		mov.L	[r10], r5
  68 0045 62 15                   		add	#1, r5
  69 0047 E3 A5                   		mov.L	r5, [r10]
  70                             	.L5:
  52:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		for ( i = 0; i < 15; ++i ) {
  71                             		.loc 1 52 3 discriminator 1
  72 0049 EC A5                   		mov.L	[r10], r5
  73 004b 61 E5                   		cmp	#14, r5
  74 004d 2B E6                   		ble	.L6
  75                             	.L4:
  54:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		}
  55:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	}
  56:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
  57:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	if ( eit != NULL ) {
  76                             		.loc 1 57 5
  77 004f ED A5 04                		mov.L	16[r10], r5
  78 0052 61 05                   		cmp	#0, r5
  79 0054 20 16                   		beq	.L7
  58:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		ssp->spc  = eit->pc;
  80                             		.loc 1 58 18
  81 0056 ED A5 04                		mov.L	16[r10], r5
  82 0059 EC 54                   		mov.L	[r5], r4
  83                             		.loc 1 58 13
  84 005b ED A5 01                		mov.L	4[r10], r5
  85 005e A3 DC                   		mov.L	r4, 60[r5]
  59:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		ssp->spsw = eit->psw;
  86                             		.loc 1 59 18
  87 0060 ED A5 04                		mov.L	16[r10], r5
  88 0063 A8 5C                   		mov.L	4[r5], r4
  89                             		.loc 1 59 13
  90 0065 ED A5 01                		mov.L	4[r10], r5
  91 0068 A4 54                   		mov.L	r4, 64[r5]
  92                             	.L7:
  60:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	}
  61:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
  62:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	if ( cregs != NULL ) {
  93                             		.loc 1 62 5
  94 006a ED A5 05                		mov.L	20[r10], r5
  95 006d 61 05                   		cmp	#0, r5
  96 006f 20 0C                   		beq	.L9
  63:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		tcb->tskctxb.ssp = cregs->ssp;
  97                             		.loc 1 63 27
  98 0071 ED A5 05                		mov.L	20[r10], r5
  99 0074 EC 54                   		mov.L	[r5], r4
 100                             		.loc 1 63 20
 101 0076 ED A5 02                		mov.L	8[r10], r5
 102 0079 A1 D4                   		mov.L	r4, 24[r5]
 103                             	.L9:
  64:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	}
  65:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** }
 104                             		.loc 1 65 1
 105 007b 03                      		nop
 106 007c 3F AA 07                		rtsd	#28, r10-r10
 107                             	.LFE22:
 109                             		.global	_knl_get_reg
 111                             	_knl_get_reg:
 112                             	.LFB23:
  66:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #endif /* USE_FUNC_TK_SET_REG || USE_FUNC_TD_SET_REG */
  67:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
  68:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #if defined(USE_FUNC_TK_GET_REG) || defined(USE_FUNC_TD_GET_REG)
  69:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** /* ------------------------------------------------------------------------ */
  70:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** /*
  71:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  * Get task register contents (Used in tk_get_reg())
  72:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  */
  73:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** EXPORT void knl_get_reg( TCB *tcb, T_REGS *regs, T_EIT *eit, T_CREGS *cregs )
  74:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** {
 113                             		.loc 1 74 1
 114 007f 7E AA                   		push.l	r10
 115                             	.LCFI2:
 116 0081 71 0A E8                		add	#-24, r0, r10
 117                             	.LCFI3:
 118 0084 EF A0                   		mov.L	r10, r0
 119 0086 E7 A1 02                		mov.L	r1, 8[r10]
 120 0089 E7 A2 03                		mov.L	r2, 12[r10]
 121 008c E7 A3 04                		mov.L	r3, 16[r10]
 122 008f E7 A4 05                		mov.L	r4, 20[r10]
  75:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	SStackFrame	*ssp;
  76:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	INT		i;
  77:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
  78:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	ssp = (SStackFrame*)tcb->tskctxb.ssp;
 123                             		.loc 1 78 6
 124 0092 ED A5 02                		mov.L	8[r10], r5
 125 0095 A9 D5                   		mov.L	24[r5], r5
 126 0097 E7 A5 01                		mov.L	r5, 4[r10]
  79:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
  80:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	if ( regs != NULL ) {
 127                             		.loc 1 80 5
 128 009a ED A5 03                		mov.L	12[r10], r5
 129 009d 61 05                   		cmp	#0, r5
 130 009f 20 23                   		beq	.L11
  81:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		for ( i = 0; i < 15; ++i ) {
 131                             		.loc 1 81 11
 132 00a1 F8 A6 00                		mov.L	#0, [r10]
 133                             		.loc 1 81 3
 134 00a4 2E 18                   		bra	.L12
 135                             	.L13:
  82:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 			regs->r[i] = ssp->r[i];
 136                             		.loc 1 82 23 discriminator 3
 137 00a6 ED A5 01                		mov.L	4[r10], r5
 138 00a9 EC A4                   		mov.L	[r10], r4
 139 00ab FE 64 53                		mov.L	[r4,r5], r3
 140                             		.loc 1 82 15 discriminator 3
 141 00ae ED A5 03                		mov.L	12[r10], r5
 142 00b1 EC A4                   		mov.L	[r10], r4
 143 00b3 FE 24 53                		mov.L	r3, [r4,r5]
  81:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		for ( i = 0; i < 15; ++i ) {
 144                             		.loc 1 81 24 discriminator 3
 145 00b6 EC A5                   		mov.L	[r10], r5
 146 00b8 62 15                   		add	#1, r5
 147 00ba E3 A5                   		mov.L	r5, [r10]
 148                             	.L12:
  81:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		for ( i = 0; i < 15; ++i ) {
 149                             		.loc 1 81 3 discriminator 1
 150 00bc EC A5                   		mov.L	[r10], r5
 151 00be 61 E5                   		cmp	#14, r5
 152 00c0 2B E6                   		ble	.L13
 153                             	.L11:
  83:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		}
  84:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	}
  85:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
  86:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	if ( eit != NULL ) {
 154                             		.loc 1 86 5
 155 00c2 ED A5 04                		mov.L	16[r10], r5
 156 00c5 61 05                   		cmp	#0, r5
 157 00c7 20 16                   		beq	.L14
  87:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		eit->pc = ssp->spc;
 158                             		.loc 1 87 16
 159 00c9 ED A5 01                		mov.L	4[r10], r5
 160 00cc AB DC                   		mov.L	60[r5], r4
 161                             		.loc 1 87 11
 162 00ce ED A5 04                		mov.L	16[r10], r5
 163 00d1 E3 54                   		mov.L	r4, [r5]
  88:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		eit->psw = ssp->spsw;
 164                             		.loc 1 88 17
 165 00d3 ED A5 01                		mov.L	4[r10], r5
 166 00d6 AC 54                   		mov.L	64[r5], r4
 167                             		.loc 1 88 12
 168 00d8 ED A5 04                		mov.L	16[r10], r5
 169 00db A0 5C                   		mov.L	r4, 4[r5]
 170                             	.L14:
  89:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	}
  90:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
  91:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	if ( cregs != NULL ) {
 171                             		.loc 1 91 5
 172 00dd ED A5 05                		mov.L	20[r10], r5
 173 00e0 61 05                   		cmp	#0, r5
 174 00e2 20 0C                   		beq	.L16
  92:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		cregs->ssp = tcb->tskctxb.ssp; 
 175                             		.loc 1 92 28
 176 00e4 ED A5 02                		mov.L	8[r10], r5
 177 00e7 A9 D4                   		mov.L	24[r5], r4
 178                             		.loc 1 92 14
 179 00e9 ED A5 05                		mov.L	20[r10], r5
 180 00ec E3 54                   		mov.L	r4, [r5]
 181                             	.L16:
  93:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	}
  94:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** }
 182                             		.loc 1 94 1
 183 00ee 03                      		nop
 184 00ef 3F AA 07                		rtsd	#28, r10-r10
 185                             	.LFE23:
 187                             		.global	_knl_force_dispatch
 189                             	_knl_force_dispatch:
 190                             	.LFB24:
  95:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #endif /* USE_FUNC_TK_GET_REG || USE_FUNC_TD_GET_REG */
  96:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
  97:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #if NUM_COPROCESSOR > 0
  98:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #ifdef USE_FUNC_TK_SET_CPR
  99:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** /* ------------------------------------------------------------------------ */
 100:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** /*
 101:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  * Set Coprocessor registers contents (Used in tk_set_cpr())
 102:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  */
 103:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** EXPORT ER knl_set_cpr( TCB *tcb, INT copno, CONST T_COPREGS *copregs )
 104:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** {
 105:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	SStackFrame	*ssp;
 106:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	ER		ercd;
 107:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
 108:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	ssp = (SStackFrame*)tcb->tskctxb.ssp;
 109:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	ercd = E_OK;
 110:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
 111:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	switch(copno) {
 112:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	case COPNO_0:		/* copno 0: FPU */
 113:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #if	USE_FPU
 114:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		ssp->fpsw = copregs->cop0.fpsw;
 115:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #else
 116:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		ercd = E_PAR;
 117:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #endif
 118:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		break;
 119:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
 120:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	case COPNO_1:			/* copno 1: DSP */
 121:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #if	USE_DSP
 122:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		ssp->acc0lo = copregs->cop1.acc0lo;
 123:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		ssp->acc0hi = copregs->cop1.acc0hi;
 124:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		ssp->acc0gu = copregs->cop1.acc0gu;
 125:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		ssp->acc1lo = copregs->cop1.acc1lo;
 126:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		ssp->acc1hi = copregs->cop1.acc1hi;
 127:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		ssp->acc1gu = copregs->cop1.acc1gu;
 128:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #else
 129:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		ercd = E_PAR;
 130:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #endif
 131:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		break;
 132:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	default:
 133:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		ercd = E_PAR;
 134:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	}
 135:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
 136:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	return ercd;
 137:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** }
 138:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #endif /* USE_FUNC_TK_SET_CPR */
 139:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
 140:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #ifdef USE_FUNC_TK_GET_CPR
 141:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** /* ------------------------------------------------------------------------ */
 142:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** /*
 143:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  * Get Coprocessor registers contents (Used in tk_get_cpr())
 144:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  */
 145:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** EXPORT ER knl_get_cpr( TCB *tcb, INT copno, T_COPREGS *copregs)
 146:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** {
 147:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	SStackFrame	*ssp;
 148:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	ER		ercd;
 149:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
 150:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	ssp = (SStackFrame*)tcb->tskctxb.ssp;
 151:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	ercd = E_OK;
 152:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
 153:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	switch (copno) {
 154:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	case COPNO_0:			/* copno 0: FPU */
 155:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #if	USE_FPU
 156:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		copregs->cop0.fpsw = ssp->fpsw;
 157:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #else
 158:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		ercd = E_PAR;
 159:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #endif
 160:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		break;
 161:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
 162:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	case COPNO_1:			/* copno 1: DPS */
 163:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #if	USE_DSP
 164:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		copregs->cop1.acc0lo = ssp->acc0lo;
 165:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		copregs->cop1.acc0hi = ssp->acc0hi;
 166:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		copregs->cop1.acc0gu = ssp->acc0gu;
 167:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		copregs->cop1.acc1lo = ssp->acc1lo;
 168:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		copregs->cop1.acc1hi = ssp->acc1hi;
 169:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		copregs->cop1.acc1gu = ssp->acc1gu;
 170:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #else
 171:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		ercd = E_PAR;
 172:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #endif
 173:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		break;
 174:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
 175:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	default:
 176:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		ercd = E_PAR;
 177:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 		break;
 178:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	}
 179:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
 180:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	return ercd;
 181:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** }
 182:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #endif /* USE_FUNC_TK_GET_CPR */
 183:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** #endif /* NUM_COPROCESSOR > 0 */
 184:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
 185:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** /* ----------------------------------------------------------------------- */
 186:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** /*
 187:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  *	Task dispatcher startup
 188:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c ****  */
 189:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** EXPORT void knl_force_dispatch( void )
 190:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** {
 191                             		.loc 1 190 1
 192 00f2 7E AA                   		push.l	r10
 193                             	.LCFI4:
 194 00f4 71 0A FC                		add	#-4, r0, r10
 195                             	.LCFI5:
 196 00f7 EF A0                   		mov.L	r10, r0
 191:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	FP	fp = knl_dispatch_to_schedtsk;
 197                             		.loc 1 191 5
 198 00f9 F8 A2 00 00 00 00       		mov.L	#_knl_dispatch_to_schedtsk, [r10]
 192:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
 193:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	Asm("jsr %0" :: "r"(fp));	/* No return */
 199                             		.loc 1 193 2
 200 00ff EC A5                   		mov.L	[r10], r5
 201                             	 ; 193 "../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c" 1
 202 0101 7F 15                   		jsr r5
 203                             	 ; 0 "" 2
 194:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** }
 204                             		.loc 1 194 1
 205 0103 03                      		nop
 206 0104 3F AA 02                		rtsd	#8, r10-r10
 207                             	.LFE24:
 209                             		.global	_knl_dispatch
 211                             	_knl_dispatch:
 212                             	.LFB25:
 195:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 
 196:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** EXPORT void knl_dispatch( void )
 197:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** {
 213                             		.loc 1 197 1
 214 0107 7E AA                   		push.l	r10
 215                             	.LCFI6:
 216 0109 EF 0A                   		mov.L	r0, r10
 217                             	.LCFI7:
 198:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** 	knl_dispatch_entry();
 218                             		.loc 1 198 2
 219 010b 05 00 00 00             		bsr	_knl_dispatch_entry
 199:../kernel/sysdepend/cpu/core/rxv2/cpu_cntl.c **** }
 220                             		.loc 1 199 1
 221 010f 03                      		nop
 222 0110 3F AA 01                		rtsd	#4, r10-r10
 223                             	.LFE25:
 318                             	.Letext0:
 319                             		.file 2 "D:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\include/tk/typedef.h"
 320                             		.file 3 "d:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\include\\tk\\sysdepend\\cpu\\core\\rxv2\\c
 321                             		.file 4 "D:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\include/tk/syscall.h"
 322                             		.file 5 "D:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\include/sys/queue.h"
 323                             		.file 6 "D:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\kernel\\knlinc/kernel.h"
 324                             		.file 7 "d:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\kernel\\tkernel\\timer.h"
 325                             		.file 8 "d:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\kernel\\tkernel\\winfo.h"
 326                             		.file 9 "d:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\kernel\\tkernel\\mutex.h"
 327                             		.file 10 "d:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\kernel\\sysdepend\\cpu\\core\\rxv2\\sysde
 328                             		.file 11 "d:\\tkernel_dev\\mtk3_bsp\\dev_bsp_b2_tbrx65n\\kernel\\sysdepend\\cpu\\core\\rxv2\\cpu_s
 329                             		.file 12 "../kernel/sysdepend/cpu/core/rxv2/../../../rtb_rx65n/../cpu/rx65n/sysdepend.h"
 330                             		.file 13 "../kernel/sysdepend/cpu/core/rxv2/cpu_task.h"
